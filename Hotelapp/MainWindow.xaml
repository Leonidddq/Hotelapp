<Window x:Class="Hotel1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="АВТОРИЗАЦИЯ" Height="450" Width="800">
    <Grid>
        <Label Content="Введите логин" HorizontalAlignment="Left" Margin="148,46,0,0" VerticalAlignment="Top" Height="40"/>
        <Label Content="Введите пароль" HorizontalAlignment="Left" Margin="148,150,0,0" VerticalAlignment="Top" Height="43"/>
        <TextBox x:Name="TextBox1" HorizontalAlignment="Left" Margin="148,86,0,0" VerticalAlignment="Top" Height="33" Width="250"/>
        <PasswordBox x:Name="TextBox2" HorizontalAlignment="Left" Margin="148,190,0,0" VerticalAlignment="Top" Height="33" Width="250"/>
        <Button x:Name="Button1" Content="Войти" HorizontalAlignment="Left" Margin="300,250,0,0" VerticalAlignment="Top" Height="45" Width="90" Click="Button1_Click"/>
    </Grid>
</Window>
create table role (
    id_role serial primary key,
    roles varchar not null
);

create table staff (
    id serial primary key,
    name varchar not null,
    surname varchar not null,
    ssurname varchar not null,
    description varchar not null,
    rolee int not null references role(id_role),
    room varchar not null,
    login varchar not null,
    password varchar not null
);

create table guest (
    id_guest serial primary key,
    name varchar not null,
    surname varchar not null,
    sname varchar not null,
    passport varchar not null,
    phone varchar,
    email varchar
);

create table users (
    id_users serial primary key,
    name varchar not null,
    surname varchar not null,
    sname varchar not null,
    role2 int references role(id_role),
    login varchar not null,
    password varchar not null,
    count int,
    active bool,
    date date,
    is_first_login bool
);

create table room_type (
    id_type serial primary key,
    type_name varchar not null,
    description text
);

create table room (
    id_room serial primary key,
    room_number varchar not null,
    floor int,
    type_id int references room_type(id_type),
    status varchar not null
);

create table booking (
    id_booking serial primary key,
    guest_id int references guest(id_guest),
    room_id int references room(id_room),
    check_in date not null,
    check_out date not null,
    paid boolean not null
);

create table service (
    id_service serial primary key,
    service_name varchar not null,
    description text,
    price numeric(10, 2)
);

create table guest_service (
    id serial primary key,
    guest_id int references guest(id_guest),
    service_id int references service(id_service),
    service_date date
);

create table cleaning_schedule (
    id_schedule serial primary key,
    room_id int references room(id_room),
    staff_id int references staff(id),
    scheduled_date date not null,
    completed boolean default false
);

create table invoice (
    id_invoice serial primary key,
    booking_id int references booking(id_booking),
    total numeric(10,2) not null,
    date_created date default current_date
);

create table payment (
    id_payment serial primary key,
    invoice_id int references invoice(id_invoice),
    amount numeric(10,2) not null,
    payment_date date not null,
    method varchar
);

create table access_card (
    id_card serial primary key,
    room_id int references room(id_room),
    guest_id int references guest(id_guest),
    issued_date timestamp default current_timestamp,
    active boolean default true
);

create table maintenance_request (
    id_request serial primary key,
    room_id int references room(id_room),
    description text,
    reported_date date not null,
    resolved boolean default false
);

create table feedback (
    id_feedback serial primary key,
    guest_id int references guest(id_guest),
    message text,
    submitted_date timestamp default current_timestamp
);

create table discount (
    id_discount serial primary key,
    code varchar not null,
    amount numeric(5,2),
    valid_until date
);

create table booking_discount (
    id serial primary key,
    booking_id int references booking(id_booking),
    discount_id int references discount(id_discount)
);

create table loyalty_program (
    id_loyalty serial primary key,
    guest_id int references guest(id_guest),
    points int default 0,
    tier varchar
);

create table staff_shift (
    id_shift serial primary key,
    staff_id int references staff(id),
    shift_date date not null,
    start_time time,
    end_time time
);

create table event (
    id_event serial primary key,
    name varchar not null,
    event_date date,
    location varchar,
    description text
);

create table guest_event (
    id serial primary key,
    guest_id int references guest(id_guest),
    event_id int references event(id_event)
);

create table amenities (
    id_amenity serial primary key,
    name varchar not null,
    description text
);

create table room_amenity (
    id serial primary key,
    room_id int references room(id_room),
    amenity_id int references amenities(id_amenity)
);

create table wake_up_call (
    id_call serial primary key,
    guest_id int references guest(id_guest),
    call_time timestamp
);
create table reservation_status (
    id_status serial primary key,
    status_name varchar not null
);

create table reservation_log (
    id_log serial primary key,
    booking_id int references booking(id_booking),
    status_id int references reservation_status(id_status),
    changed_on timestamp default current_timestamp
);

create table notifications (
    id_notification serial primary key,
    staff_id int references staff(id),
    message text,
    created_at timestamp default current_timestamp,
    read boolean default false
);

create table guest_preferences (
    id_pref serial primary key,
    guest_id int references guest(id_guest),
    preference text
);

create table city (
    id_city serial primary key,
    name varchar not null
);

create table guest_origin (
    id_origin serial primary key,
    guest_id int references guest(id_guest),
    city_id int references city(id_city)
);

create table temperature_log (
    id_temp serial primary key,
    room_id int references room(id_room),
    log_date timestamp default current_timestamp,
    temperature numeric(4,1)
);

create table user_activity (
    id_activity serial primary key,
    staff_id int references staff(id),
    action text,
    action_time timestamp default current_timestamp
);    
